<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Prep‚ÄìYear 2 Animal Maths | Free Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#f3f7f5;
      margin:0;
      padding:24px;
    }
    .card{
      max-width:760px;
      margin:auto;
      background:#fff;
      border-radius:18px;
      padding:22px;
      box-shadow:0 10px 26px rgba(0,0,0,.08);
    }
    h1{margin:0 0 10px;color:#0b5ed7;font-weight:1000;}
    .pill{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(11,94,215,.08);
      border:1px solid rgba(11,94,215,.18);
      color:#0b5ed7;
      font-weight:900;
      margin-bottom:10px;
    }
    .intro{color:#555;font-weight:650;line-height:1.6;margin-bottom:10px;}
    .q{font-size:20px;font-weight:900;margin:14px 0 10px;}

    label{
      display:block;
      margin-bottom:6px;
      font-weight:800;
      color:#334155;
    }
    input,select{
      width:100%;
      padding:12px;
      font-size:16px;
      border-radius:12px;
      border:1px solid #ccc;
      box-sizing:border-box;
    }

    .row2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:24px;
      margin-bottom:14px;
    }
    .field{margin-bottom:14px;}
    @media (max-width:720px){
      .row2{grid-template-columns:1fr;}
    }

    .btnrow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    button{
      padding:12px 16px;
      font-size:16px;
      font-weight:900;
      border-radius:12px;
      border:none;
      background:#0b5ed7;
      color:#fff;
      cursor:pointer;
    }
    button.secondary{
      background:#eef2ff;
      color:#0b5ed7;
    }
    button:disabled{
      opacity:.55;
      cursor:not-allowed;
    }

    .feedback{
      margin-top:12px;
      padding:12px;
      border-radius:12px;
      font-weight:800;
      line-height:1.5;
    }
    .ok{background:#e8fff0;border:1px solid #9be7b2;}
    .bad{background:#fff0f0;border:1px solid #f2a6a6;}

    .hide{display:none;}

    .cta{
      margin-top:16px;
      padding:16px;
      border-radius:14px;
      background:#fff7e8;
      border:1px solid rgba(245,158,11,.35);
      color:#555;
      font-weight:700;
    }

    .note{
      margin-top:10px;
      color:#64748b;
      font-weight:650;
      font-size:14px;
      line-height:1.6;
    }

    .resultBox{
      margin-top:16px;
      padding:14px;
      border-radius:14px;
      background:rgba(11,94,215,.05);
      border:1px solid rgba(11,94,215,.18);
    }
    .resultTitle{
      font-weight:1000;
      color:#0b5ed7;
      margin-bottom:6px;
    }
    canvas{
      width:100%;
      height:220px;
      background:#fff;
      border-radius:12px;
      border:1px solid rgba(0,0,0,.12);
      margin-top:8px;
    }

    ul{margin:6px 0 0 18px;}
    li{margin-bottom:6px;}

    .footer{
      margin-top:18px;
      padding-top:12px;
      border-top:1px dashed #ccc;
      text-align:center;
      color:#666;
      font-weight:650;
    }
  </style>
</head>

<body>
<div class="card">

  <div class="pill">üå± Prep ‚Äì Year 2 ‚Ä¢ Animals</div>
  <h1>Animal Maths Practice (Free Demo)</h1>

  <p class="intro">
    Type your answer, press <b>Check</b>, then press <b>Next</b>.
  </p>

  <!-- START -->
  <div id="startMsg" class="q">Enter your details, then press <b>Start</b> üêæ</div>

  <div id="profileBox">
    <div class="row2">
      <div class="field">
        <label>Student name</label>
        <input id="studentName" placeholder="e.g., Anna">
      </div>
      <div class="field">
        <label>Grade</label>
        <select id="studentGrade">
          <option value="">Select‚Ä¶</option>
          <option>Prep</option>
          <option>Year 1</option>
          <option>Year 2</option>
        </select>
      </div>
    </div>
    <div class="note">
      This short demo helps us understand how your child thinks.
      No email or phone number is collected.
    </div>
  </div>

  <div id="startButtons" class="btnrow">
    <button onclick="start()">Start</button>
  </div>

  <!-- QUIZ -->
  <div id="qa" class="hide">
    <div id="q" class="q"></div>
    <input id="ans" inputmode="numeric" placeholder="Type a number">

    <div class="btnrow">
      <button id="checkBtn" onclick="check()">Check</button>
      <button id="nextBtn" class="secondary" onclick="next()" disabled>Next</button>
    </div>
  </div>

  <div id="fb"></div>

  <!-- END -->
  <div id="end" class="cta hide">
    <div id="finalLine"></div>

    <!-- Graph -->
    <div class="resultBox">
      <div class="resultTitle">Results overview</div>
      <div id="pctText"></div>
      <canvas id="chart" width="800" height="260"></canvas>
    </div>

    <!-- Parent summary -->
    <div class="resultBox">
      <div class="resultTitle">üë®‚Äçüë©‚Äçüëß Parent Summary</div>

      <p id="parentOverview"></p>

      <p><b>What your child did well:</b></p>
      <ul id="strengthList"></ul>

      <p><b>What to practise next:</b></p>
      <ul id="nextList"></ul>

      <p class="note">
        This demo is <b>not a test</b>. It helps us plan calm, confidence-building lessons
        suited to your child‚Äôs needs.
      </p>
    </div>

    <div id="saveStatus" class="note"></div>

    <div class="note">
      Interested in a personalised learning plan?
      <a href="https://www.magicmathmaster.com.au/contact.html" target="_blank">
        Enquire or register ‚Üí
      </a>
    </div>
  </div>

  <div class="footer">Magic Math Master ‚Ä¢ Free Demo</div>
</div>

<script>
/* ================= CONFIG ================= */
const ENDPOINT_URL =
  "https://script.google.com/macros/s/AKfycbwvWZJLRflPGQA3s5P2-B5LkTFonS4Z1SPI5-85lzlj1lFY02qXJzTd239PsiB0WICr/exec";

const qs = [
  { q:"Counting and adding animals (5 + 2)", a:7 },
  { q:"Subtracting animals (9 ‚àí 3)", a:6 },
  { q:"Equal groups (4 √ó 2)", a:8 },
  { q:"Counting legs (3 √ó 4)", a:12 }
];

let i=-1, score=0;
let student={name:"",grade:""};
let gotCorrect=new Array(qs.length).fill(false);

const el=id=>document.getElementById(id);

/* ================= FLOW ================= */
function start(){
  student.name=el("studentName").value.trim();
  student.grade=el("studentGrade").value;
  if(!student.name){alert("Please enter student name");return;}

  el("profileBox").style.display="none";
  el("startButtons").style.display="none";
  el("startMsg").style.display="none";
  el("qa").classList.remove("hide");

  next();
}

function next(){
  i++;
  el("fb").textContent="";
  el("nextBtn").disabled=true;
  el("ans").value="";

  if(i>=qs.length){ finish(); return; }
  el("q").textContent=qs[i].q;
}

function check(){
  const v=Number(el("ans").value);
  if(!Number.isFinite(v)){
    el("fb").className="feedback bad";
    el("fb").textContent="Please type a number.";
    return;
  }

  if(v===qs[i].a){
    if(!gotCorrect[i]) score++;
    gotCorrect[i]=true;
    el("fb").className="feedback ok";
    el("fb").textContent="Correct!";
  }else{
    el("fb").className="feedback bad";
    el("fb").textContent="That one was tricky ‚Äî let‚Äôs practise it more.";
  }
  el("nextBtn").disabled=false;
}

function finish(){
  el("qa").style.display="none";
  el("end").classList.remove("hide");

  const pct=Math.round(score/qs.length*100);
  el("finalLine").textContent=`Score: ${score}/${qs.length} (${pct}%)`;
  el("pctText").textContent=`Percentage correct: ${pct}%`;

  drawChart(gotCorrect.map(v=>v?1:0));
  buildParentSummary();
  saveResult(pct);
}

/* ================= GRAPH ================= */
function drawChart(vals){
  const c=el("chart"),ctx=c.getContext("2d");
  ctx.clearRect(0,0,c.width,c.height);
  const barW=50,gap=20,base=220;
  vals.forEach((v,i)=>{
    const h=v*180;
    ctx.fillStyle=v?"#0b5ed7":"#ef4444";
    ctx.fillRect(60+i*(barW+gap),base-h,barW,h);
    ctx.fillStyle="#000";
    ctx.fillText(`Q${i+1}`,60+i*(barW+gap)+10,base+18);
    ctx.fillText(v,60+i*(barW+gap)+18,base-h-6);
  });
}

/* ================= PARENT SUMMARY ================= */
function buildParentSummary(){
  const strengths=[], next=[];
  qs.forEach((q,i)=>{
    if(gotCorrect[i]) strengths.push(q.q);
    else next.push(q.q);
  });

  el("parentOverview").textContent =
    score===qs.length
      ? "üåü Excellent work! Your child showed strong understanding across all questions."
      : score>=qs.length*0.6
        ? "üëç Your child shows developing understanding with some areas to strengthen."
        : "üå± Your child is still building confidence, which is very normal at this stage.";

  el("strengthList").innerHTML =
    strengths.length ? strengths.map(s=>`<li>${s}</li>`).join("") :
    "<li>Showing effort and willingness to try.</li>";

  el("nextList").innerHTML =
    next.length ? next.map(n=>`<li>${n}</li>`).join("") :
    "<li>Continue practising to build speed and confidence.</li>";
}

/* ================= SAVE ================= */
async function saveResult(pct){
  el("saveStatus").textContent="Saving result‚Ä¶";
  await fetch(ENDPOINT_URL,{
    method:"POST",
    mode:"no-cors",
    body:JSON.stringify({
      level:"Prep‚Äì2",
      name:student.name,
      grade:student.grade,
      score,total:qs.length,
      percent:pct,
      perQuestion01:gotCorrect.map(v=>v?1:0)
    })
  });
  el("saveStatus").textContent="‚úÖ Result saved.";
}
</script>

</body>
</html>